---
description: Update documentation after code changes
globs: ["**/*"]
alwaysApply: false
---

# Update Documentation

You're updating documentation after code changes. Documentation should be **accurate, concise, and useful**.

## Step 1: Identify What Changed

Check recent changes:
- `git diff` or `git log` for modified files
- Identify which features/modules were affected
- Note new files, deleted files, renamed files

## Step 2: Verify Against Actual Code

**CRITICAL: Do NOT trust existing documentation.**

For each changed area:
1. Read the actual implementation
2. Understand current behavior (not documented behavior)
3. Note discrepancies with existing docs

## Step 3: Update Relevant Documentation

### Files to Consider

| File | Update When |
|------|-------------|
| `README.md` | Setup instructions, main features change |
| `CHANGELOG.md` | Any user-facing changes |
| `docs/api/` | API endpoints change |
| `docs/architecture/` | System design changes |
| `claude.md` | Patterns, conventions, or structure changes |
| Inline comments | Complex logic is added/changed |
| JSDoc/TSDoc | Function signatures change |

### CHANGELOG Format

```markdown
## [Unreleased]

### Added
- New feature description (#issue-number)

### Changed
- What was modified and why

### Fixed
- Bug that was fixed (#issue-number)

### Security
- Security-related changes

### Removed
- What was removed and why
```

### README Updates

Only update if:
- Installation steps changed
- New dependencies required
- New environment variables needed
- Usage examples are now incorrect
- Features were added/removed

### Inline Documentation

Add comments when:
- Logic is non-obvious
- Business rules are encoded
- Workarounds are implemented
- External dependencies have quirks

```typescript
// Good: Explains WHY
// We retry 3 times because the payment API occasionally returns 503 during peak hours

// Bad: Explains WHAT (code already shows this)
// Loop 3 times
for (let i = 0; i < 3; i++) { ... }
```

## Documentation Style Rules

### DO
✅ **Be concise** - Every word should earn its place
✅ **Be practical** - Examples over theory
✅ **Be accurate** - Verify against code
✅ **Be current** - Delete outdated info
✅ **Use code examples** - Show, don't just tell

### DON'T
❌ Enterprise fluff ("leveraging synergies")
❌ Outdated information
❌ Assumptions without verification
❌ Documentation for documentation's sake
❌ Duplicating information across files

## Output Format

```markdown
# Documentation Update Summary

## Files Updated
- `docs/X.md` - [What was updated]
- `README.md` - [What was updated]
- `CHANGELOG.md` - Added [version/unreleased] entry

## Changes Made

### [File 1]
**Section:** [Which section]
**Change:** [Added/Updated/Removed]
**Reason:** [Why this change was needed]

### [File 2]
...

## Verification
- [ ] All code references are accurate
- [ ] Examples are runnable
- [ ] No broken links
- [ ] Formatting is consistent

## Questions/Uncertainties
- [Anything unclear that needs human input]
```

## Rules

- **Verify everything** - Read the code before documenting
- **Less is more** - Shorter docs get read
- **Ask if uncertain** - Don't guess about intent
- **Keep it DRY** - Don't duplicate across files
- **Date sensitive info** - "As of [date]..." for things that change

## Starting Documentation Update

Say: "I'll update documentation for recent changes. Specify which changes to document, or I'll check git diff for recent modifications."
