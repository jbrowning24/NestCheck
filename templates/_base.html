<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}NestCheck{% endblock %}</title>
  {% block meta_description %}<meta name="description" content="NestCheck evaluates any address for walkability, parks, transit, and safety — so families can make confident moving decisions.">{% endblock %}
  {% block og_tags %}
  <meta property="og:title" content="{{ self.title() }}">
  <meta property="og:description" content="NestCheck evaluates any address for walkability, parks, transit, and safety — so families can make confident moving decisions.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="{{ request.url }}">
  {% endblock %}
  <!-- Leaflet.js — interactive maps (loaded before page CSS so styles can override) -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
        crossorigin="">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/tokens.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
  {% block extra_css %}{% endblock %}
  {% block head_extra %}{% endblock %}
  <meta name="csrf-token" content="{{ csrf_token() }}">
</head>
<body>

<nav>
  {% block nav_content %}
    <a href="/" class="logo">Nest<span>Check</span></a>
    <div>
      {% block nav_links %}{% endblock %}
    </div>
  {% endblock %}
</nav>

{% block content %}{% endblock %}

{% block footer %}
<footer>
  NestCheck &middot; Decision support for families optimizing daily life.
  <div class="footer-links">
    <a href="/privacy">Privacy Policy</a> &middot; <a href="/terms">Terms of Service</a>
  </div>
</footer>
{% endblock %}

<!-- Leaflet.js — loaded before page scripts so neighborhood-map.js can use L -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>
{% block scripts %}{% endblock %}

<!-- Cookie Consent Banner -->
<div id="cookie-banner" class="cookie-banner">
    <span>We use a single cookie to track your evaluation requests. No advertising or third-party tracking.</span>
    <a href="/privacy#cookies">Learn More</a>
    <button onclick="acceptCookies()">Accept</button>
</div>
<script>
function acceptCookies() {
    localStorage.setItem('nc_cookie_consent', '1');
    document.cookie = 'nc_cookie_consent=1; path=/; max-age=' + (365*24*3600) + '; SameSite=Lax';
    document.getElementById('cookie-banner').style.display = 'none';
}
(function() {
    if (localStorage.getItem('nc_cookie_consent')) {
        // Rehydrate consent cookie if cleared while localStorage persisted
        if (document.cookie.indexOf('nc_cookie_consent=') === -1) {
            document.cookie = 'nc_cookie_consent=1; path=/; max-age=' + (365*24*3600) + '; SameSite=Lax';
        }
    } else {
        document.getElementById('cookie-banner').style.display = 'flex';
    }
})();
</script>

</body>
</html>
