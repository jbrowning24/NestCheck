<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}NestCheck{% endblock %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/base.css') }}">
  {% block extra_css %}{% endblock %}
  {% block head_extra %}{% endblock %}
  <meta name="csrf-token" content="{{ csrf_token() }}">
</head>
<body>

<nav>
  {% block nav_content %}
    <a href="/" class="logo">Nest<span>Check</span></a>
    <div>
      {% block nav_links %}{% endblock %}
    </div>
  {% endblock %}
</nav>

{% block content %}{% endblock %}

{% block footer %}
<footer>
  NestCheck &middot; Decision support for families optimizing daily life.
  <div class="footer-links">
    <a href="/privacy">Privacy Policy</a> &middot; <a href="/terms">Terms of Service</a>
  </div>
</footer>
{% endblock %}

{% block scripts %}{% endblock %}

<!-- Cookie Consent Banner -->
<div id="cookie-banner" style="display:none; position:fixed; bottom:0; left:0; right:0; background:var(--color-primary-dark); color:#e0e0e0; padding:14px 24px; font-size:14px; z-index:9999; align-items:center; justify-content:center; gap:16px; flex-wrap:wrap; box-shadow:0 -2px 8px rgba(0,0,0,0.3);">
    <span>We use a single cookie to track your evaluation requests. No advertising or third-party tracking.</span>
    <a href="/privacy#cookies" style="color:#93c5fd; text-decoration:underline; white-space:nowrap;">Learn More</a>
    <button onclick="acceptCookies()" style="background:#ffffff; color:#16213e; border:none; padding:6px 18px; border-radius:4px; cursor:pointer; font-weight:600; white-space:nowrap;">Accept</button>
</div>
<script>
function acceptCookies() {
    localStorage.setItem('nc_cookie_consent', '1');
    document.cookie = 'nc_cookie_consent=1; path=/; max-age=' + (365*24*3600) + '; SameSite=Lax';
    document.getElementById('cookie-banner').style.display = 'none';
}
(function() {
    if (localStorage.getItem('nc_cookie_consent')) {
        // Rehydrate consent cookie if cleared while localStorage persisted
        if (document.cookie.indexOf('nc_cookie_consent=') === -1) {
            document.cookie = 'nc_cookie_consent=1; path=/; max-age=' + (365*24*3600) + '; SameSite=Lax';
        }
    } else {
        document.getElementById('cookie-banner').style.display = 'flex';
    }
})();
</script>

</body>
</html>
